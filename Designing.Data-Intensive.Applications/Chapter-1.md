# 第一章 可靠、可扩展、可维护的应用

目前的应用大多是**数据密集型**的，而不是**计算密集型**的。CPU算力几乎不会成为这些应用的限制因素，这些应用的问题通常在于数据的数量、数据的复杂度以及数据的更新速度。

数据密集型应用通常是使用提供通用能力的标准模块搭建的。例如，大部分应用需要：

- 存储数据，以便当前应用或者其他应用能在之后查询到这些数据（数据库 databases）。

- 存储耗时操作的结果，来加速查询（缓存 caches）。

- 允许使用者通过关键词搜索数据，或者按照多种方式对数据进行过滤（搜索索引 search indexes）。

- 向其他应用发送消息，从而使任务被异步处理（流处理 stream processing）。

- 周期性地计算逐渐增加的数据的总量（批处理 batch processing）。

在需要搭建一个应用时，大多数工程师并不会选择从头开始编写一个数据存储引擎，因为数据库才是对于这个任务最合适的工具。

但是，实际情况往往也不会这么简单。目前还存着许多具有不同特性的数据系统，因为不同应用有着不同的要求。缓存和搜索索引的构建方式同样也是多种多样的。在构建一个应用时，我们仍然需要考虑，对于要处理的任务，最适合的方式是什么。并且，在单一工具无法满足应用的要求时，将多个工具组合使用也是具有挑战性的。

本书介绍了数据系统的设计准则和实例，以及如何使用这些数据系统来构建数据密集型应用。我们将会探讨不同工具之间的相同点和不同点，以及这些工具是如何实现这些特性的。

在本章中，我们将开始探讨可靠、可扩展、可维护应用的基本概念。我们将阐明这些该概念的含义，以及一些思考这些概念的方法，这将会是后续章节中所需要的。在后续章节中，我们将继续逐层介绍，构建数据密集型应用时需要考虑的设计决策。

## 对数据系统的理解

我们通常认为数据库、消息队列、缓存等是不同分类下的工具。尽管数据库和消息队列具有一些相似之处（都需要将数据存储一段时间），但是它们访问数据的方式是非常不同的，这意味着它们具有不同的特征，因此也有着不同的实现方式。

所以为什么我们将这些工具统一放在**数据系统**这个概念下呢？

近年来，出现了许多用于数据存储和数据处理的新工具。它们对多种不同的使用场景做了优化，因此不再能按照传统的方式进行分类。例如，Redis 是可以用作消息队列的数据存储系统，Kafka 是具有类似数据库的持久化能力的消息队列。分类之间的边界开始变得模糊来。

另一方面，越来越多的应用需要解决要求苛刻的或者适用性广的问题，以至于单个工具不再能满足其对数据存储和数据处理的需要。正相反，这些问题被拆分为了可以被单个工具高效处理的子任务，处理子任务的工具们组合在一起共同构成了应用代码。

例如，如果你需要一个应用管理的独立于主数据库之外的缓存层（使用 Memcached 等）或者全文搜索层（使用 Elasticsearch 等），那么通常你的应用代码应该负责保持缓存和索引与主数据库的同步性。
